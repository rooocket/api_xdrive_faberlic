<h1>API xDRIVE Faberlic для лидеров</h1>
<p><b>Внимание</b>: вы самостоятельно несете ответственность за использование своего ключа доступа (token) к apiXDRIVE. Не храните ключ в 
открытом виде (например, в скрипте javascript), иначе он может быть использован другими пользователями, а владелец ключа заблокирован.</p>
<p><b>Перед запуском рекламы обязательно проверьте доступность отправки смс в ту страну на которую настроена реклама. Для это можно использовать любой сервис входящих сообщений.</b></p>

<p><b>Структура файлов:</b></p>

<ul>
    <li><b>index.php</b> – верстка формы и пример передачи запросов в класс apiXDRIVE
        <ul>
            <li>{YOUR_TOKEN} – необходимо заполнить значение токена без фигурных скобок.</li>
            <li>1111111111 – регистрационный номер в Faberlic к которому будут добавляться новички после успешной регистрации.</li>
            <li>$return_url – ссылка куда будет перенаправлен пользователь после регистрации</li>
            <li>$comment - string(100) - необязательный параметр. Будет полезен, если один токен используется на нескольких площадках, например, определение источника СПАМа. Можно добавить какой-то личный идентификатор в свободной форме.</li>
        </ul>
    </li>
    <li><b>classes/apiXDRIVE.class.php</b> – класс apiXDRIVE, содержащий функции обработки и отправки запроса к apiXDRIVE</li>
</ul>

<p><b>Особенности:</b></p>
<ul>
    <li>В форме поле ФИО можно объединить в одно поле, но до передачи данных в apiXDRIVE необходимо разделять на отдельные переменные. Фамилия и Имя - 
обязательные поля, Отчество - нет.</li>
    <li>Дата должна передаваться в apiXDRIVE в формате dd.mm.yyyy. Если вы хотите использовать выпадающие списки для выбора даты рождения или календарь, то 
до передачи данных в  apiXDRIVE необходимо привести дату в нужный формат.</li>
    <li>В примере код подтверждения номера запрашивается при клике на ссылку - Get verification code. По примеру вы можете добавить свой скрипт отправки смс,
например, отправка смс при выходе пользователя  из из поля Телефон (focusout)</li>
    <li>Поле Пол – значение по-умолчанию “f”, можно не использовать в форме в явном виде.</li>
    <li>Страна – по-умолчанию “ru” (Россия). Для передачи значения поля необходимо использовать код страны в формате Alpha2, ссылка на список кодов - 
<a href="https://www.artlebedev.ru/country-list/" target="_blank">https://www.artlebedev.ru/country-list/</a> </li>
    <li>Параметр redirect_url – ссылка на которую пользователь будет перенаправлен после регистрации, может быть указана любая страница, не только сайт Faberlic, например, https://ya.ru.  Есть несколько особенностей этого параметра:
        <ul>
            <li>Редирект на старый сайт <a href="https://faberlic.com" target="_blank">https://faberlic.com</a> (или любую другую страницу этого сайта, например, на страницу товара) – в этом случае 
пользователь перенаправляется на специальный зашифрованный url, где произойдет автоматическая авторизация пользователя на сайте faberlic.com и далее перенравится указанную ссылку.<br>Пример ссылки: https://faberlic.com/index.php?option=com_catalog&view=goods&id=1001312519886&Itemid=2075&lang=ru</li>
            <li>На любой другой сайт (в том числе и new.faberlic.com) – автоматическая авторизация не сработает и пользователю надо будет ввести логин и пароль от личного кабинета.</li>
            <li>На собранную корзину товаров – автоматическая авторизация не сработает и пользователю надо будет ввести логин и пароль от личного кабинета.</li>
        </ul>
    </li>
</ul>
<p><b>Ограничения:</b></p>
<ul>
    <li>На сайте владельца токена должен быть установлен SSL-сертификат для домена (https://)</li>
    <li>На каждый токен выдается дневной лимит по смс. Например, по-умолчанию ограничение на токен 100 SMS в день - неизрасходованный объем не переносится на следующий день и обновляется в 00:00 по МСК. Вы можете сделать запрос на увеличение лимита SMS через поддержку клиентов Faberlic в личном кабинете.</li>
    <li>На один номер телефона можно отправить не более 2 смс.</li>
    <li>Нельзя зарегистрировать пользователя младше 14 лет, а так же, если номер телефона был зарегистрирован и активен в базе данных Faberlic.</li>
    <li>Уведомления о критическом остатке смс приходят только в телеграм боте <a href="https://t.me/xDriveAPI_bot" target="_blank">https://t.me/xDriveAPI_bot</a> , смс или 
предупреждения на e-mail не 
отправляются.</li>
</ul>


